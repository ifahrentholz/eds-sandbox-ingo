{"version":3,"file":"title.js","sources":["../../node_modules/lit-html/static.js","../../src/utils/getElementData.ts","../../src/utils/getBlockModifiers.ts","../../src/blocks/title/title.ts"],"sourcesContent":["import{html as t,svg as r}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=Symbol.for(\"\"),o=t=>{if(t?.r===e)return t?._$litStatic$},i=t=>({_$litStatic$:t,r:e}),s=(t,...r)=>({_$litStatic$:r.reduce(((r,e,o)=>r+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\\n            take care to ensure page security.`)})(e)+t[o+1]),t[0]),r:e}),a=new Map,l=t=>(r,...e)=>{const i=e.length;let s,l;const n=[],u=[];let c,$=0,f=!1;for(;$<i;){for(c=r[$];$<i&&void 0!==(l=e[$],s=o(l));)c+=s+r[++$],f=!0;$!==i&&u.push(l),n.push(c),$++}if($===i&&n.push(r[i]),f){const t=n.join(\"$$lit$$\");void 0===(r=a.get(t))&&(n.raw=n,a.set(t,r=n)),e=u}return t(r,...e)},n=l(t),u=l(r);export{n as html,s as literal,u as svg,i as unsafeStatic,l as withStatic};\n//# sourceMappingURL=static.js.map\n","interface ElementData {\n  element?: Element;\n  textContent?: string;\n  innerHTML?: string;\n}\n\nconst isUniversalEditor = (): boolean => {\n  return Boolean(document.querySelector('[data-aue-type]'));\n};\n\nexport function getElementData(block: HTMLElement) {\n  // eslint-disable-next-line no-console\n  console.log('isUniversalEditor:', isUniversalEditor());\n\n  return <T extends string>(rowIndex: number = 0, entries: T[]): Record<T, ElementData> => {\n    const row = block.children[rowIndex];\n    if (!row) return {} as Record<T, ElementData>;\n\n    let rowElements = Array.from(row.children);\n    const result = {} as Record<T, ElementData>;\n\n    // Find the deepest children\n    while (rowElements.length && rowElements[0].children.length) {\n      rowElements = Array.from(rowElements[0].children);\n    }\n\n    entries.forEach((entry, index) => {\n      const isRichText = entry.includes('richtext') || entry.includes('rte');\n      const element = isRichText ? rowElements[index].parentElement : rowElements[index];\n      result[entry] = {\n        element: element || undefined,\n        textContent: rowElements[index]?.textContent || undefined,\n        innerHTML: rowElements[index]?.innerHTML || undefined,\n      };\n    });\n\n    return result;\n  };\n}\n","export const getBlockModifiers = (block: HTMLElement, blockName: string) => {\n  const blockClassList = Array.from(block.classList);\n  const blockModifiers = blockClassList.filter((className) => className !== blockName && className !== 'block');\n  return blockModifiers;\n};\n","import { html, literal, StaticValue } from 'lit/static-html.js';\nimport { nothing, render, TemplateResult } from 'lit';\nimport './title.scss';\n\nimport { getElementData } from 'Utils/getElementData';\nimport { moveInstrumentation } from 'Helpers/moveInstrumentation';\nimport { getBlockModifiers } from 'Utils/getBlockModifiers';\nimport { cleanUpBlock } from 'Utils/cleanUpBlock';\n\ntype TemplateProps = {\n  titleText?: string;\n  subline?: string;\n  tagName?: string;\n  cssClass?: string;\n  sublineLarge?: string;\n};\n\nconst possibleStyleModifiers = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nconst getStyleModifier = (modifiers: string[]) => {\n  return modifiers.find((modifier) => possibleStyleModifiers.includes(modifier)) || 'h1';\n};\n\nconst renderHeadline = (tagName: string, text: string, cssClass: string) => {\n  const tagMap: Record<string, StaticValue> = {\n    h1: literal`h1`,\n    h2: literal`h2`,\n    h3: literal`h3`,\n    h4: literal`h4`,\n    h5: literal`h5`,\n    h6: literal`h6`,\n  };\n\n  const tag = tagMap[tagName];\n\n  return html`\n    <${tag} class=\"module-headline ${cssClass}\">${text}</${tag}>\n  `;\n};\n\nconst renderSubline = (subline: string, sublineLarge?: string) => {\n  if (subline === '') return nothing;\n  return html`<p class=\"module-subtitle${sublineLarge === 'large-subline' ? ' large-subline' : ''}\">${subline}</p>`;\n};\n\nconst template = ({\n  titleText,\n  subline = '',\n  tagName = 'h2',\n  cssClass = 'h1',\n  sublineLarge = '',\n}: TemplateProps): TemplateResult | typeof nothing => {\n  if (!titleText) {\n    return nothing;\n  }\n\n  return html`\n    <div class=\"module-title\" data-js-richtext>\n      ${renderHeadline(tagName, titleText, cssClass)}${renderSubline(subline, sublineLarge)}\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const modifiers = getBlockModifiers(block, 'customtitle');\n  const getDataForRow = getElementData(block);\n  const { richtext } = getDataForRow(0, ['richtext']);\n  const richtextEl = richtext.element;\n  const titleElement = richtext.element?.children[0];\n  const sublineElement = richtext.element?.children[1];\n  const tagName = titleElement?.tagName.toLowerCase() || 'h2';\n\n  cleanUpBlock(block);\n\n  render(\n    template({\n      titleText: titleElement?.textContent || '',\n      subline: sublineElement?.innerHTML || '',\n      tagName,\n      cssClass: getStyleModifier(modifiers),\n      sublineLarge: modifiers.includes('large-subline') ? 'large-subline' : '',\n    }),\n    block\n  );\n\n  const newRichtextEl = block.querySelector('[data-js-richtext]');\n  if (richtextEl && newRichtextEl) moveInstrumentation(richtextEl, newRichtextEl);\n}\n"],"names":["e","o","s","r","t","a","l","i","n","u","c","$","f","isUniversalEditor","getElementData","block","rowIndex","entries","row","rowElements","result","entry","index","element","_a","_b","getBlockModifiers","blockName","className","possibleStyleModifiers","getStyleModifier","modifiers","modifier","renderHeadline","tagName","text","cssClass","tag","literal","html","renderSubline","subline","sublineLarge","nothing","template","titleText","title","getDataForRow","richtext","richtextEl","titleElement","sublineElement","cleanUpBlock","render","newRichtextEl","moveInstrumentation"],"mappings":"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","x_google_ignoreList":[0]}